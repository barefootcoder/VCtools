<git>
	DefaultMainline = master

	<info>
		user <<---
			git config github.user
		---

		status <<---
			git status
		---

		is_dirty <<---
			@ %status !~ /working directory clean/
		---

		has_staged <<---
			@ %status =~ /Changes to be committed:/
		---

		mod_files <<---
			git status -s | awk '{print $2}'
		---

		cur_branch <<---
			git branch --contains HEAD | cut -c3-
		---

		branches <<---
			git branch | cut -c3-
		---

		remote_branches <<---
			git branch -r | cut -c3-
		---

		tags <<---
			git tag
		---
	</info>

	<commands>
		stat <<---
			>
			> %status
			>
			git stash list
			>
		---

		show-branches <<---
			git branch
		---

		# remember: %info methods record the state as of the beginning of the command
		# therefore, %is_dirty will remain true (if it was before) even after the stash
		sync <<---
			%is_dirty -> git stash save -u
			git pull --rebase
			%is_dirty -> git stash pop
		---

		stage <<---
			git add -i .
		---

		unget <<---
			git checkout -- %files
		---

		# this doesn't quite work correctly yet
		resolved <<---
			git add %files
			git reset HEAD %files
		---

		commit <<---
			%files && %has_staged -> ! Cannot commit specific files with staged changes
			!%files && !%has_staged -> ! Either stage changes or specify files to commit
			%has_staged -> git commit -v
			!%has_staged -> git commit -v %files
		---
	</commands>
</git>
